<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Notification Test</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/socket.io.js"></script>
    <script type="text/javascript">
        var socket = null;
        $(document).ready(function () {
            socket = io.connect();
            var now = new Date();
            var consoleDiv = $('#console');
            console.log('socket connected');
            socket.on('update', function (latest) {                
                now = new Date();
                var msg = '[' + now + '] ' + latest;
                console.log(msg);
                consoleDiv.prepend('<p>' + msg + '</p>');
            })
        });
        $(document).unload(function () {
            if (socket) socket.disconnect();
            console.log('disconnect a socket');
        });
    </script>
</head>
<body>
    <div id="console">
    </div>
</body>
</html>