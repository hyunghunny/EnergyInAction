<!DOCTYPE html>
<html>
<head>
  <title>Energy Saving Behavior Research</title>
  <link rel="stylesheet" type="text/css" href="./stylesheets/style_v2.css">
  <script src="javascripts/lib/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/lib/highcharts.js"></script>
    <script src="javascripts/lib/highcharts-more.js"></script>
    <script src="javascripts/lib/solid-gauge.js"></script>
    <script type="text/javascript" src="javascripts/lib/socket.io.js"></script>
    <script type="text/javascript" src="javascripts/lib/exporting.js"></script>
  <script type="text/javascript">
      var myIp = '127.0.0.1';
      var pageId = 'MARG';

    $(document).ready(function () {
        var socket = io.connect();
        var now = new Date();
        $.get("http://ipinfo.io", function (response) {
            console.log(response.ip);
            myIp = response.ip;
            socket.emit('updated', { 'date': now, 'id': myIp + '/' + pageId, 'state': 'loaded' });
        }, "jsonp");

        socket.on('update', function (msg) {
            location.reload();
            var now = new Date();
            socket.emit('updated', { 'date': now, 'id': myIp + '/' + pageId, 'state': 'updated' });
        })
    });
  </script>
</head>

<body bgcolor="#333333">
  <div class="wrapper_class">
    <div class="left">
      <div class = "class_lefttop">
        <h3 class="class_box_title"><span class="box_title">1월</span></h3>
        <div id ="acc_points" class ="class_acc_points"></div>
      </div>
      <div class="class_left_between"></div>
      <div class = "class_leftbottom">
        <h3 class="class_meter_title"><span class="class_box_title_span">실시간</span></h3>
        <div id="marg_meter" class="class_meter"></div>
      </div>
    </div>

    <div class="center">
      <div class="center_wrapper">
      <div class="traffic_container">
        <h3 class="class_box_title"><span class="class_box_title_span">오늘</span></h3>
        <div id="today_points" class = "class_today_points">
          <div id="saving_points" class="saving_points_class"></div>
        </div>
        <div id="traffic_light" class="traffic_light_class">
          <div id="marg_smile" class="class_smile">
            <div id="smiley" class="class_smiley"></div>
          </div>
        </div>
      </div>
      <div class="nilm_container">
        <div class="com_wrapper"><div id="icon_com" class="class_icon"></div><div id="marg_comparison_winter_com" class="comparison_winter_com"></div></div>
        <div class="light_wrapper"><div id="icon_light" class="class_icon"></div><div id="marg_comparison_winter_light" class="comparison_winter_light"></div></div>
        <div class="hvac_wrapper"><div id="icon_hvac" class="class_icon"></div><div id="marg_comparison_winter_hvac" class="comparison_winter_hvac"></div></div>
      </div>
      <div id="title_nowText" class="class_title_nowText"></div>
    </div>
  </div>

<script type="text/javascript" src="./javascripts/utiles.js"></script>
<script type="text/javascript" src="./javascripts/marg/marg_title.js"></script>
<script type="text/javascript" src="./javascripts/marg/marg_smile_v2.js"></script>
<script type="text/javascript" src="./javascripts/marg/marg_comparison_winter_com.js"></script>
<script type="text/javascript" src="./javascripts/marg/marg_comparison_winter_light.js"></script>
<script type="text/javascript" src="./javascripts/marg/marg_comparison_winter_hvac.js"></script>

<script type="text/javascript" src="./javascripts/marg/marg_day_breakdown2.js"></script>
<script type="text/javascript" src="./javascripts/marg/marg_week_breakdown.js"></script>
<script type="text/javascript" src="./javascripts/marg/marg_month_breakdown.js"></script>

<script type="text/javascript" src="./javascripts/marg/marg_meter_v2.js"></script>
<script type="text/javascript" src="./javascripts/marg_comparison_winter_todaysPoints.js"></script>
<script type="text/javascript" src="./javascripts/marg_comparison_winter_monthsPoints.js"></script>

</body>

</html>
